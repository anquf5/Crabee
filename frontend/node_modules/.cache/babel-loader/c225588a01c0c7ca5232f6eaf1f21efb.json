{"remainingRequest":"D:\\code\\Crabee\\frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\code\\Crabee\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\code\\Crabee\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\code\\Crabee\\frontend\\src\\views\\TopicDetail.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\code\\Crabee\\frontend\\src\\views\\TopicDetail.vue","mtime":1638741706877},{"path":"D:\\code\\Crabee\\frontend\\babel.config.js","mtime":1638741696256},{"path":"D:\\code\\Crabee\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1638741698497},{"path":"D:\\code\\Crabee\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1638741698146},{"path":"D:\\code\\Crabee\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1638741698497},{"path":"D:\\code\\Crabee\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1638741705878}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJUb3BpY0RldGFpbCIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRvcGljOiB7fSwKICAgICAgZm9ybURhdGE6IHsKICAgICAgICBpZDogdGhpcy4kcm91dGUucGFyYW1zLmlkLAogICAgICAgIGNvbnRlbnQ6ICcnCiAgICAgIH0KICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5nZXRUb3BpYygpOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0VG9waWM6IGZ1bmN0aW9uIGdldFRvcGljKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGlkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkOwogICAgICBheGlvcy5nZXQoIi9hcGkvdG9waWMvIi5jb25jYXQoaWQsICIvIikpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMudG9waWMgPSByZXNwb25zZS5kYXRhOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0pOwogICAgfSwKICAgIGFkZFJlcGx5OiBmdW5jdGlvbiBhZGRSZXBseSgpIHsKICAgICAgdmFyIGlkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkOwogICAgICBheGlvcy5wb3N0KCcvYXBpL3RvcGljL3JlcGx5LycsIHsKICAgICAgICAndGlkJzogdGhpcy5mb3JtRGF0YS5pZCwKICAgICAgICAnY29udGVudCc6IHRoaXMuZm9ybURhdGEuY29udGVudAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICB9KTsKICAgIH0sCiAgICBnb190b19yZXBseTogZnVuY3Rpb24gZ29fdG9fcmVwbHkoKSB7CiAgICAgIHZhciBqdW1wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3JlcGx5Iik7CgogICAgICBpZiAoISFqdW1wKSB7CiAgICAgICAganVtcC5zY3JvbGxJbnRvVmlldyh0cnVlKTsKICAgICAgfQoKICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiZ29fdG9fcmVwbHkiKS5zY3JvbGxJbnRvVmlldyh0cnVlKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["D:\\code\\Crabee\\frontend\\src\\views\\TopicDetail.vue"],"names":[],"mappings":"AAyGA,OAAO,KAAP,MAAkB,OAAlB;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,aADO;AAEb,EAAA,IAFa,kBAEP;AACJ,WAAM;AACJ,MAAA,KAAK,EAAC,EADF;AAEJ,MAAA,QAAQ,EAAE;AACR,QAAA,EAAE,EAAE,KAAK,MAAL,CAAY,MAAZ,CAAmB,EADf;AAER,QAAA,OAAO,EAAC;AAFA;AAFN,KAAN;AAOD,GAVY;AAWb,EAAA,OAXa,qBAWH;AACR,SAAK,QAAL;AACD,GAbY;AAcb,EAAA,OAAO,EAAE;AACP,IAAA,QADO,sBACG;AAAA;;AACR,UAAM,EAAE,GAAC,KAAK,MAAL,CAAY,MAAZ,CAAmB,EAA5B;AAEA,MAAA,KAAI,CACC,GADL,sBACuB,EADvB,QAEK,IAFL,CAEU,UAAA,QAAO,EAAK;AAChB,QAAA,KAAI,CAAC,KAAL,GAAa,QAAQ,CAAC,IAAtB;AACD,OAJL,EAKK,KALL,CAKW,UAAA,KAAI,EAAK;AACd,QAAA,OAAO,CAAC,GAAR,CAAY,KAAZ;AACD,OAPL;AAQD,KAZM;AAaP,IAAA,QAbO,sBAaG;AACR,UAAM,EAAE,GAAC,KAAK,MAAL,CAAY,MAAZ,CAAmB,EAA5B;AACA,MAAA,KAAK,CAAC,IAAN,CAAW,mBAAX,EAA+B;AAC7B,eAAO,KAAK,QAAL,CAAc,EADQ;AAE7B,mBAAW,KAAK,QAAL,CAAc;AAFI,OAA/B,EAIC,IAJD,CAIM,UAAA,QAAO,EAAK;AAChB,QAAA,QAAQ,CAAC,MAAT;AACD,OAND;AAOD,KAtBM;AAuBP,IAAA,WAvBO,yBAuBM;AACX,UAAM,IAAG,GAAI,QAAQ,CAAC,aAAT,CAAuB,QAAvB,CAAb;;AACA,UAAG,CAAC,CAAC,IAAL,EAAW;AACT,QAAA,IAAI,CAAC,cAAL,CAAoB,IAApB;AACF;;AACA,MAAA,QAAQ,CAAC,aAAT,CAAuB,aAAvB,EAAsC,cAAtC,CAAqD,IAArD;AACF;AA7BO;AAdI,CAAf","sourcesContent":["<template>\r\n  <section class=\"section\">\r\n    <section class=\"hero is-small is-info\">\r\n      <div class=\"hero-body\">\r\n        <p class=\"is-size-4\"><strong>\r\n          {{ topic.title }}\r\n        </strong>\r\n        </p>\r\n        <button class=\"button is-small mt-4\" @click=\"go_to_reply\">Reply</button>\r\n      </div>\r\n    </section>\r\n    <div>\r\n      <div class=\"tile is-ancestor mt-4 mb-4\">\r\n        <div class=\"tile is-parent is-3\">\r\n          <article class=\"tile is-child\">\r\n            <article class=\"media\">\r\n              <div class=\"media-left\">\r\n                <div class=\"image is-64x64\">\r\n                  <div v-if=\"topic.get_user_avatar !== '' \">\r\n                    <img v-bind:src=\"topic.get_user_avatar\">\r\n                  </div>\r\n                  <div v-else>\r\n                    <img :src=\"require('../assets/default.jpg')\">\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"media-content\">\r\n                <p>{{ topic.get_creator }}</p>\r\n              </div>\r\n            </article>\r\n          </article>\r\n        </div>\r\n        <div class=\"tile is-parent is-6\">\r\n          <article class=\"tile is-child\">\r\n            <p class=\"mx-5\">{{ topic.topic_cont }}</p>\r\n          </article>\r\n        </div>\r\n        <div class=\"tile is-parent is-3\">\r\n          <article class=\"tile is-child\">\r\n            <p class=\"mx-5\">{{ topic.get_pubtime }}</p>\r\n          </article>\r\n        </div>\r\n      </div>\r\n      <hr>\r\n    </div>\r\n    <div v-for=\"reply in topic.reply\" v-bind:key=\"reply.id\" v-bind:topic=\"topic\">\r\n      <div class=\"tile is-ancestor mt-4 mb-4\">\r\n        <div class=\"tile is-parent is-3\">\r\n          <article class=\"tile is-child\">\r\n            <article class=\"media\">\r\n              <div class=\"media-left\">\r\n                <div class=\"image is-64x64\">\r\n                  <div v-if=\"reply.get_user_avatar !== '' \">\r\n                    <img v-bind:src=\"reply.get_user_avatar\">\r\n                  </div>\r\n                  <div v-else>\r\n                    <img :src=\"require('../assets/default.jpg')\">\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"media-content\">\r\n                <p>{{ reply.get_username }}</p>\r\n              </div>\r\n            </article>\r\n          </article>\r\n        </div>\r\n        <div class=\"tile is-parent is-6\">\r\n          <article class=\"tile is-child\">\r\n            <p class=\"mx-5\">{{ reply.reply_cont }}</p>\r\n          </article>\r\n        </div>\r\n        <div class=\"tile is-parent is-3\">\r\n          <article class=\"tile is-child\">\r\n            <p class=\"mx-5\">{{ reply.get_pubtime }}</p>\r\n          </article>\r\n        </div>\r\n      </div>\r\n      <hr>\r\n    </div>\r\n\r\n    <form id=\"reply\" @submit.prevent=\"addReply\">\r\n      <article class=\"media\">\r\n        <figure class=\"media-left\">\r\n          <p class=\"image is-64x64\">\r\n            <img src=\"https://bulma.io/images/placeholders/128x128.png\">\r\n          </p>\r\n        </figure>\r\n        <div class=\"media-content\">\r\n          <div class=\"field\">\r\n            <p class=\"control\">\r\n              <textarea class=\"textarea\" placeholder=\"Add a comment...\" v-model=\"formData.content\"></textarea>\r\n            </p>\r\n          </div>\r\n          <div class=\"field\">\r\n            <p class=\"control\">\r\n              <button class=\"button\">Reply</button>\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </article>\r\n    </form>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  name: \"TopicDetail\",\r\n  data(){\r\n    return{\r\n      topic:{},\r\n      formData: {\r\n        id: this.$route.params.id,\r\n        content:'',\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getTopic()\r\n  },\r\n  methods: {\r\n    getTopic(){\r\n      const id=this.$route.params.id\r\n\r\n      axios\r\n          .get(`/api/topic/${id}/`)\r\n          .then(response => {\r\n            this.topic = response.data\r\n          })\r\n          .catch(error => {\r\n            console.log(error)\r\n          })\r\n    },\r\n    addReply(){\r\n      const id=this.$route.params.id\r\n      axios.post('/api/topic/reply/',{\r\n        'tid': this.formData.id,\r\n        'content': this.formData.content,\r\n      })\r\n      .then(response => {\r\n        location.reload();\r\n      })\r\n    },\r\n    go_to_reply(){\r\n      const jump = document.querySelector(\"#reply\");\r\n      if(!!jump) {\r\n        jump.scrollIntoView(true);\r\n      }\r\n      document.querySelector(\"go_to_reply\").scrollIntoView(true);\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"],"sourceRoot":""}]}